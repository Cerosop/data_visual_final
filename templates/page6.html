<!DOCTYPE HTML>
<html>

<head>
    <title>互動式介面</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="{{url_for('static', filename='css/main.css')}}" />
</head>

<body class="is-preload">

    <!-- Header -->
    <div id="header">
        <span class="logo icon solid fa-dollar-sign"></span>
        <h1>互動式介面</h1>

    </div>

    <div id="main">
        <div class="box container">
            <header>
                <h2>比較自己與富豪的距離吧!</h2>
            </header>
            <section>
                <header>
                    <p>透過輸入自身自產，看看還要多少錢便可躍入富豪榜100名吧。</p>
                </header>
            </section>
            <div class="box container">
                <div class="row">
                    <div class="col-12">
                        <label for="yourMoney">輸入你的金錢:</label>
                        <input class="text" type="text" id="yourMoney" value="" placeholder="1000" />
                    </div>
                    <div class="col-6 col-12-mobilep">
                        <label for="yourAge">輸入你的年齡：</label>
                        <input class="text" type="text" id="yourAge" value="" placeholder="20" />
                    </div>
                    <div class="col-6 col-12-mobilep">
                        <label for="yourContinent">選擇你所在的洲：</label>
                        <select id="yourContinent">
                            <option value="Oceania">大洋洲</option>
                            <option value="Africa">非洲</option>
                            <option value="Asia">亞洲</option>
                            <option value="Europe">歐洲</option>
                            <option value="South America">南美洲</option>
                            <option value="North America">北美洲</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <ul class="actions special">
                            <li><input type="submit" value="Send" id="send"/></li>
                        </ul>
                    </div>

                    <script>
                        function handleSubmit(){
                            var yourContinent = document.getElementById("yourContinent").value;
                            var yourAge = document.getElementById("yourAge").value;
                            var yourMoney = document.getElementById("yourMoney").value;
                            if (/^\d+$/.test(yourAge)){
                                if (/^-?\d+$/.test(yourMoney)){
                                    yourMoney = parseInt(yourMoney, 10);
                                    if (yourMoney < 1000000000){
                                        yourAge = parseInt(yourAge, 10);

                                        var formData = { "age": yourAge, "continent": yourContinent };
                                        formData = JSON.stringify(formData);

                                        fetch('/page6', {
                                            method: 'POST',
                                            headers: {
                                                'Content-Type': 'application/json',
                                            },
                                            body: formData
                                        })
                                        .then(response => response.text())
                                        .then(data => {
                                            var responseData = JSON.parse(data);
                                            console.log(responseData.data)
                                            var a = responseData.data

                                            // 創一個新的text，寫一整串文字
                                            if(a[0]){
                                                var text1 = document.getElementById("text1");
                                                text1.textContent = "你和" + a[1][0] + "差了多少" + a[1][1];

                                                var text2 = document.getElementById("text2");
                                                text2.textContent = "你和居然輸給了" + a[0] + "人";
                                            }else{
                                                var text1 = document.getElementById("text1");
                                                text1.textContent = "助你成為該年齡的必一位億萬富豪";
                                            }

                                            var text3 = document.getElementById("text3");
                                            text3.textContent = "你和" + a[1][0] + "差了多少" + a[1][0] + a[0];

                                            //
                                            var textElement = document.getElementById("myText");
                                            textElement.style.display = "block";
                                        })
                                        .catch(error => {
                                            console.error('Error:', error);
                                        });
                                    }
                                    else{
                                        alert("白日夢還是免了吧");
                                        document.getElementById("yourM").value = "";
                                    }
                                }
                                else{
                                    alert("金錢請輸入整數");
                                    document.getElementById("yourM").value = "";
                                }
                            } 
                            else{
                                alert("年齡請輸入正整數");
                                document.getElementById("yourA").value = "";
                            }
                            
                        }
                        document.getElementById("send").addEventListener("click", handleSubmit);
                    </script>
                </div>
            </div>
            <style>
                .hidden-text {
                    display: none;
                }
            </style>
            <section>
                <header id="myText" class="hidden-text">
                    <p id="text1"></p>   <!-- 設一個text，不同id -->
                    <p id="text2"></p>
                    <p id="text3"></p>   
                    <p id="text4"></p>
                    <p id="text5"></p>   
                    <p id="text6"></p>
                    <p>透過輸入自身自產，看看還要多少錢便可躍入富豪榜100名吧。</p>
                </header>
            </section>
        </div>


        <ul class="actions special">
            <li><a href="/home" class="button">返回</a></li>
        </ul>
    </div>

    <!-- Scripts -->
	<script src="{{url_for('static', filename='js/jquery.min.js')}}"></script>
	<script src="{{url_for('static', filename='js/browser.min.js')}}"></script>
	<script src="{{url_for('static', filename='js/breakpoints.min.js')}}"></script>
	<script src="{{url_for('static', filename='js/util.js')}}"></script>
	<script src="{{url_for('static', filename='js/main.js')}}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>

</body>

</html>